<div th:include="fragments/head"></div>
</head>

<body class="d-flex h-100">
    <div class="w-100 d-flex flex-column">

        <div th:replace="fragments/header.html" :: header xmlns:th="http://www.w3.org/1999/xhtml"></div>

        <main class="mb-auto w-100">
            <section class="py-1 text-center container">
                <div class="row py-2">
                    <div class="col-lg-6 col-md-8 mx-auto">
                        <br/><br/>
                        <div th:if="${param.justbought}" class="alert alert-success" role="alert">
                            Libro comprado
                        </div>
                        <p class="text-muted my-0">Vuelve al catálogo</p>
                        <p class="my-0">
                            <a th:href="@{/catalog}"  class="btn btn-primary my-2">Volver</a>
                        </p>
                    </div>
                </div>
            </section>

            <div class="d-flex justify-content-around bg-light px-5">
                <div class="d-flex flex-column justify-content-center">
                    <h1 class="p-2" th:text="${book.name}"></h1>
                    <h4 class="p-2" th:text="${book.author}"></h4>
                    <input id="input-3" name="input-3" th:value="${book.getAvgReview()}" class="rating" data-readonly="true" data-size="xm" data-show-caption="false" data-show-clear="false">
                    <p class="my-0 p-2" th:text="${book.price}"></p>
                    <a th:if="${!purchased}" class="btn btn-sm btn-outline-primary p-2" th:href="@{'/book/' + ${book.id} + '/checkout'}">Comprar</a>
                    <button th:if="${purchased}" class="btn btn-sm btn-secondary p-2" disabled>Comprado</button>
                </div>
                <div style="width: 40%;">
                    <svg class="bd-placeholder-img py-5" width="100%" height="850" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c"></rect><text x="50%" y="50%" fill="#eceeef" dy=".3em" th:text="${book.name}"></text></svg>
                </div>
            </div>
            <div class="bg-warning py-3" style="--bs-bg-opacity: .5;">
                <h1 class="text-center text-black-50">Reseñas</h1>
                <div class="w-50 m-auto my-2" th:each="review : ${reviews}">
                    <div class="card shadow-sm">
                        <div class="p-3 ps-4">
                            <h4 class="card-text ms-3 mb-2" th:text="${review.user.username}"></h4>
                            <div class="d-flex justify-content-between align-items-center ms-2">
                                <input id="input-3" name="input-3" th:value="${review.stars}" class="rating" data-readonly="true" data-size="xm" data-show-caption="false" data-show-clear="false">
                            </div>
                            <h5 class="w-100 m-0 ms-3 mt-2" th:text="${review.comment}"></h5>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <div th:replace="fragments/footer.html" :: footer xmlns:th="http://www.w3.org/1999/xhtml"></div>
    </div>
</body>